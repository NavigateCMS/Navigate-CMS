(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){var z=a.jgrid,q=z.jqID,N=a.fn.jqGrid,F=N.getGuiStyles,U=N.getGridRes;z.extend({getColProp:function(a){var c=this[0];return null!=c&&c.grid&&(a=c.p.iColByName[a],void 0!==a)?c.p.colModel[a]:{}},setColProp:function(e,c){return this.each(function(){var d=this.p,b;this.grid&&null!=d&&c&&(b=d.iColByName[e],void 0!==
b&&a.extend(!0,d.colModel[b],c))})},sortGrid:function(a,c,d){return this.each(function(){var b=this.grid,f=this.p,k=f.colModel,l=k.length,n,g,m=!1;if(b)for(a||(a=f.sortname),"boolean"!==typeof c&&(c=!1),g=0;g<l;g++)if(n=k[g],n.index===a||n.name===a){!0===f.frozenColumns&&!0===n.frozen&&(m=b.fhDiv.find("#"+f.id+"_"+a));m&&0!==m.length||(m=b.headers[g].el);b=n.sortable;("boolean"!==typeof b||b)&&this.sortData("jqgh_"+f.id+"_"+a,g,c,d,m);break}})},clearBeforeUnload:function(){return this.each(function(){var e=
this.p,c=this.grid,d,b=z.clearArray,f=Object.prototype.hasOwnProperty;a.isFunction(c.emptyRows)&&c.emptyRows.call(this,!0,!0);a(document).unbind("mouseup.jqGrid"+e.id);a(c.hDiv).unbind("mousemove");a(this).unbind();var k,l=c.headers.length;for(k=0;k<l;k++)c.headers[k].el=null;for(d in c)c.hasOwnProperty(d)&&(c.propOrMethod=null);c="formatCol sortData updatepager refreshIndex setHeadCheckBox constructTr clearToolbar fixScrollOffsetAndhBoxPadding rebuildRowIndexes modalAlert toggleToolbar triggerToolbar formatter addXmlData addJSONData ftoolbar _inlinenav nav grid p".split(" ");
l=c.length;for(k=0;k<l;k++)f.call(this,c[k])&&(this[c[k]]=null);this._index={};b(e.data);b(e.lastSelectedData);b(e.selarrrow);b(e.savedRow)})},GridDestroy:function(){return this.each(function(){var e=this.p;if(this.grid&&null!=e){e.pager&&a(e.pager).remove();try{a("#alertmod_"+e.idSel).remove(),a(this).jqGrid("clearBeforeUnload"),a(e.gBox).remove()}catch(c){}}})},GridUnload:function(){return this.each(function(){var e=a(this),c=this.p,d=a.fn.jqGrid;this.grid&&(e.removeClass(d.getGuiStyles.call(e,
"grid","ui-jqgrid-btable")),c.pager&&a(c.pager).empty().removeClass(d.getGuiStyles.call(e,"pagerBottom","ui-jqgrid-pager")).removeAttr("style").removeAttr("dir"),e.jqGrid("clearBeforeUnload"),e.removeAttr("style").removeAttr("tabindex").removeAttr("role").removeAttr("aria-labelledby").removeAttr("style"),e.empty(),e.insertBefore(c.gBox).show(),a(c.pager).insertBefore(c.gBox).show(),a(c.gBox).remove())})},setGridState:function(e){return this.each(function(){var c=this.p,d=this.grid,b=d.cDiv,f=a(d.uDiv),
k=a(d.ubDiv);if(d&&null!=c){var d=N.getIconRes.call(this,"gridMinimize.visible"),l=N.getIconRes.call(this,"gridMinimize.hidden");"hidden"===e?(a(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv",c.gView).slideUp("fast"),c.pager&&a(c.pager).slideUp("fast"),c.toppager&&a(c.toppager).slideUp("fast"),!0===c.toolbar[0]&&("both"===c.toolbar[1]&&k.slideUp("fast"),f.slideUp("fast")),c.footerrow&&a(".ui-jqgrid-sdiv",c.gBox).slideUp("fast"),a(".ui-jqgrid-titlebar-close span",b).removeClass(d).addClass(l),c.gridstate="hidden"):
"visible"===e&&(a(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv",c.gView).slideDown("fast"),c.pager&&a(c.pager).slideDown("fast"),c.toppager&&a(c.toppager).slideDown("fast"),!0===c.toolbar[0]&&("both"===c.toolbar[1]&&k.slideDown("fast"),f.slideDown("fast")),c.footerrow&&a(".ui-jqgrid-sdiv",c.gBox).slideDown("fast"),a(".ui-jqgrid-titlebar-close span",b).removeClass(l).addClass(d),c.gridstate="visible")}})},filterToolbar:function(e){return this.each(function(){var c=this,d=c.grid,b=a(c),f=c.p,k=z.bindEv,l=z.info_dialog,
n=z.htmlEncode;if(!this.ftoolbar){var g=a.extend(!0,{autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",idMode:"new",searchOperators:!1,resetIcon:"&times;",applyLabelClasses:!0,loadFilterDefaults:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},z.search,f.searching||{},e||{}),m=f.colModel,
A=function(a){return U.call(b,a)},B=A("errors.errcap"),S=A("edit.bClose"),J=A("edit.msg"),G=F.call(c,"states.hover"),w=F.call(c,"states.select"),L=F.call(c,"filterToolbar.dataField"),H,C=function(a){var c="gs_";switch(g.idMode){case "compatibility":c+=f.idPrefix;break;case "new":c+=f.id+"_"}return c+a},t=function(c){var b;b=f.postData.filters;var d={},u,e,h,k;if(c)for(c=0;c<m.length;c++)h=m[c],!1!==h.search&&(k=h.searchoptions||{},d[h.name]={op:k.sopt?k.sopt[0]:"select"===h.stype?"eq":g.defaultSearch,
data:void 0!==k.defaultValue?k.defaultValue:""});if(!b||!f.search)return d;if("string"===typeof b)try{b=a.parseJSON(b)}catch(p){b={}}else b=b||{};u=b.rules||{};if(null==b||null!=b.groupOp&&null!=g.groupOp&&b.groupOp.toUpperCase()!==g.groupOp.toUpperCase()||null==u||0===u.length||null!=b.groups&&0<b.groups.length)return d;for(c=0;c<u.length;c++)for(e=u[c],b=0;b<m.length;b++)if(h=m[b],(h.index||h.name)===e.field&&!1!==h.search){k=h.searchoptions||{};if(k.sopt){if(0>a.inArray(e.op,k.sopt))continue}else if("select"===
h.stype){if("eq"!==e.op)continue}else if(e.op!==g.defaultSearch)continue;d[h.name]={op:e.op,data:e.data}}return d},E=function(){var e={},I=0,u={};a.each(m,function(){var b=this,k=b.index||b.name,h,p;h=b.searchoptions||{};var K=a("#"+q(C(b.name)),!0===b.frozen&&!0===f.frozenColumns?d.fhDiv:d.hDiv),x=function(a,c){var d=b.formatoptions||{};return void 0!==d[a]?d[a]:A("formatter."+(c||b.formatter)+"."+a)},l=function(a){var c=x("thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return a.replace(new RegExp(c,
"g"),"")};p=g.searchOperators?K.parent().prev().children("a").data("soper")||g.defaultSearch:h.sopt?h.sopt[0]:"select"===b.stype?"eq":g.defaultSearch;if("custom"===b.stype&&a.isFunction(h.custom_value)&&0<K.length&&"SPAN"===K[0].nodeName.toUpperCase())h=h.custom_value.call(c,K.children(".customelement").first(),"get");else if("select"===b.stype)h=K.val();else switch(h=a.trim(K.val()),b.formatter){case "integer":h=l(h).replace(x("decimalSeparator","number"),".");""!==h&&(h=String(parseInt(h,10)));
break;case "number":h=l(h).replace(x("decimalSeparator"),".");""!==h&&"0"===String(h).charAt(0)&&(h=String(parseFloat(h)));break;case "currency":var K=x("prefix"),n=x("suffix");K&&K.length&&(h=h.substr(K.length));n&&n.length&&(h=h.substr(0,h.length-n.length));h=l(h).replace(x("decimalSeparator"),".");""!==h&&(h=String(parseFloat(h)))}if(h||"nu"===p||"nn"===p)e[k]=h,u[k]=p,I++;else if(e.hasOwnProperty(k)&&delete e[k],!g.stringResult&&!g.searchOperators&&"local"!==f.datatype)try{null!=f.postData&&f.postData.hasOwnProperty(k)&&
delete f.postData[k]}catch(m){}});var k=0<I?!0:!1;if(g.stringResult||g.searchOperators||"local"===f.datatype){var p='{"groupOp":"'+g.groupOp+'","rules":[',h=0;a.each(e,function(a,c){0<h&&(p+=",");p+='{"field":"'+a+'",';p+='"op":"'+u[a]+'",';p+='"data":"'+(c+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';h++});p+="]}";a.extend(f.postData,{filters:p});a.each(["searchField","searchString","searchOper"],function(a,c){f.postData.hasOwnProperty(c)&&delete f.postData[c]})}else a.extend(f.postData,e);
var x;f.searchurl&&(x=f.url,b.jqGrid("setGridParam",{url:f.searchurl}));var l="stop"===b.triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!l&&a.isFunction(g.beforeSearch)&&(l=g.beforeSearch.call(c));l||b.jqGrid("setGridParam",{search:k}).trigger("reloadGrid",[a.extend({page:1},g.reloadGridSearchOptions||{})]);x&&b.jqGrid("setGridParam",{url:x});b.triggerHandler("jqGridToolbarAfterSearch");a.isFunction(g.afterSearch)&&g.afterSearch.call(c)},M=A("search.odata")||[],u=f.customSortOperations,p=function(d,
I,e){a("#sopt_menu").remove();I=parseInt(I,10);e=parseInt(e,10)+18;var k,p=0,h=[],x=a(d).data("soper"),p=a(d).data("colname"),l=a(".ui-jqgrid-view").css("font-size")||"11px";I="<ul id='sopt_menu' class='"+F.call(c,"searchToolbar.menu","ui-search-menu")+"' role='menu' tabindex='0' style='z-index:9999;display:block;font-size:"+l+";left:"+I+"px;top:"+e+"px;'>";p=f.iColByName[p];if(void 0!==p){p=m[p];e=a.extend({},p.searchoptions);var r,v;e.sopt||(e.sopt=[],e.sopt[0]="select"===p.stype?"eq":g.defaultSearch);
a.each(M,function(){h.push(this.oper)});null!=u&&a.each(u,function(a){h.push(a)});for(p=0;p<e.sopt.length;p++)l=e.sopt[p],k=a.inArray(l,h),-1!==k&&(k=M[k],void 0!==k?(v=g.operands[l],r=k.text):null!=u&&(r=u[l],v=r.operand,r=r.text),k=x===l?w:"",I+='<li class="ui-menu-item '+k+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+n(l)+'" data-oper="'+n(v)+'"><table><tr><td style="width:25px">'+n(v)+"</td><td>"+n(r)+"</td></tr></table></a></li>");I+="</ul>";
a("body").append(I);a("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all");a("#sopt_menu > li > a").hover(function(){a(this).addClass(G)},function(){a(this).removeClass(G)}).click(function(){var c=a(this).attr("value"),h=a(this).data("oper");b.triggerHandler("jqGridToolbarSelectOper",[c,h,d]);a("#sopt_menu").hide();a(d).text(h).data("soper",c);!0===g.autosearch&&(h=a(d).parent().next().children()[0],(a(h).val()||"nu"===c||"nn"===c)&&E())})}},x,R=a("<tr></tr>",{"class":"ui-search-toolbar",
role:"row"});g.loadFilterDefaults&&(H=t()||{});a.each(m,function(b){var d,e;e="";var p,n,h=this.searchoptions||{},m=this.editoptions||{},t=a("<th></th>",{"class":F.call(c,"colHeaders","ui-th-column ui-th-"+f.direction+" "+(g.applyLabelClasses?this.labelClasses||"":""))}),r=a("<div></div>"),v=a("<table class='ui-search-table'><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear' style='width:1px'></td></tr></table>");!0===this.hidden&&a(t).css("display","none");
this.search=!1===this.search?!1:!0;void 0===this.stype&&(this.stype="text");d=a.extend({mode:"filter"},h);if(this.search){if(g.searchOperators){e=f.search&&null!=H[this.name]?H[this.name].op:d.sopt?d.sopt[0]:"select"===this.stype?"eq":g.defaultSearch;for(n=0;n<M.length;n++)if(M[n].oper===e){p=g.operands[e]||"";break}if(void 0===p&&null!=u)for(var T in u)if(u.hasOwnProperty(T)&&T===e){p=u[T].operand;break}void 0===p&&(p="=");e="<a title='"+(null!=d.searchtitle?d.searchtitle:A("search.operandTitle"))+
"' data-soper='"+e+"' class='"+F.call(c,"searchToolbar.operButton","soptclass")+"' data-colname='"+this.name+"'>"+p+"</a>"}a("td",v).first().data("colindex",b).append(e);null!=d.sopt&&1!==d.sopt.length||a("td.ui-search-oper",v).hide();f.search&&null!=H[this.name]&&(d.defaultValue=H[this.name].data);void 0===d.clearSearch&&(d.clearSearch="text"===this.stype?!0:!1);d.clearSearch?(e=A("search.resetTitle")||"Clear Search Value",a("td",v).eq(2).append("<a title='"+e+"' class='"+F.call(c,"searchToolbar.clearButton",
"clearsearchclass")+"'><span>"+g.resetIcon+"</span></a>")):a("td",v).eq(2).hide();switch(this.stype){case "select":if(e=this.surl||d.dataUrl)a(r).append(v),a.ajax(a.extend({url:e,context:{stbl:v,options:d,cm:this,iCol:b},dataType:"html",success:function(a,b,e){b=this.cm;var h=this.iCol,f=this.options,p=this.stbl.find(">tbody>tr>td.ui-search-input");void 0!==f.buildSelect?(a=f.buildSelect.call(c,a,e,b,h))&&p.append(a):p.append(a);a=p.children("select");0===a.find("option[value='']").length&&"string"===
typeof d.noFilterText&&(y=document.createElement("option"),y.value="",y.innerHTML=d.noFilterText,a.prepend(y));void 0!==f.defaultValue&&a.val(f.defaultValue);a.attr({name:b.index||b.name,id:C(b.name)});f.attr&&a.attr(f.attr);a.addClass(L);a.css({width:"100%"});k.call(c,a[0],f);z.fullBoolFeedback.call(c,f.selectFilled,"jqGridSelectFilled",{elem:a[0],options:f,cm:b,cmName:b.name,iCol:h,mode:"filter"});!0===g.autosearch&&a.change(function(){E();return!1})}},z.ajaxOptions,f.ajaxSelectOptions||{}));else{var D,
w,O;this.searchoptions?(D=void 0===h.value?m.value||"":h.value,w=void 0===h.separator?m.separator||":":h.separator,O=void 0===h.delimiter?m.delimiter||";":h.delimiter):this.editoptions&&(D=void 0===m.value?"":m.value,w=void 0===m.separator?":":m.separator,O=void 0===m.delimiter?";":m.delimiter);if(D){h=document.createElement("select");h.style.width="100%";a(h).attr({name:this.index||this.name,id:C(this.name)});var y,q,N;if("string"===typeof D)for(e=D.split(O),O=0;O<e.length;O++)D=e[O].split(w),y=
document.createElement("option"),y.value=D[0],""===D[0]&&(N=!0),y.innerHTML=D[1],h.appendChild(y);else if("object"===typeof D)for(q in D)D.hasOwnProperty(q)&&(y=document.createElement("option"),y.value=q,""===q&&(N=!0),y.innerHTML=D[q],h.appendChild(y));N||"string"!==typeof d.noFilterText||(y=document.createElement("option"),y.value="",y.innerHTML=d.noFilterText,a(h).prepend(y));void 0!==d.defaultValue&&a(h).val(d.defaultValue);d.attr&&a(h).attr(d.attr);a(h).addClass(L);a(r).append(v);k.call(c,h,
d);a("td",v).eq(1).append(h);z.fullBoolFeedback.call(c,d.selectFilled,"jqGridSelectFilled",{elem:h,options:this.searchoptions||m,cm:this,cmName:this.name,iCol:b,mode:"filter"});!0===g.autosearch&&a(h).change(function(){E();return!1})}}break;case "text":b=void 0!==d.defaultValue?d.defaultValue:"";a("td",v).eq(1).append("<input type='text' class='"+L+"' name='"+(this.index||this.name)+"' id='"+C(this.name)+"' value='"+b+"'/>");a(r).append(v);d.attr&&a("input",r).attr(d.attr);k.call(c,a("input",r)[0],
d);!0===g.autosearch&&(g.searchOnEnter?a("input",r).keypress(function(a){return 13===(a.charCode||a.keyCode||0)?(E(),!1):this}):a("input",r).keydown(function(a){switch(a.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:x&&clearTimeout(x),x=setTimeout(function(){E()},g.autosearchDelay)}}));break;case "custom":a("td",v).eq(1).append("<span style='width:100%;padding:0;box-sizing:border-box;' class='"+L+"' name='"+(this.index||this.name)+"' id='"+C(this.name)+
"'/>");a(r).append(v);try{if(a.isFunction(d.custom_element)){var Q=d.custom_element.call(c,void 0!==d.defaultValue?d.defaultValue:"",d);if(Q)Q=a(Q).addClass("customelement"),a(r).find("span[name='"+(this.index||this.name)+"']").append(Q);else throw"e2";}else throw"e1";}catch(P){"e1"===P&&l.call(c,B,"function 'custom_element' "+J.nodefined,S),"e2"===P?l.call(c,B,"function 'custom_element' "+J.novalue,S):l.call(c,B,"string"===typeof P?P:P.message,S)}}}a(t).append(r);a(t).find(".ui-search-oper .soptclass,.ui-search-clear .clearsearchclass").hover(function(){a(this).addClass(G)},
function(){a(this).removeClass(G)});a(R).append(t);g.searchOperators||a("td",v).eq(0).hide()});a(d.hDiv).find(">div>.ui-jqgrid-htable>thead").append(R);g.searchOperators&&(a(".soptclass",R).click(function(c){var b=a(this).offset();p(this,b.left,b.top);c.stopPropagation()}),a("body").on("click",function(c){"soptclass"!==c.target.className&&a("#sopt_menu").hide()}));a(".clearsearchclass",R).click(function(){var c=a(this).parents("tr").first(),b=parseInt(a("td.ui-search-oper",c).data("colindex"),10),
d=a.extend({},m[b].searchoptions||{}).defaultValue||"";"select"===m[b].stype?d?a("td.ui-search-input select",c).val(d):a("td.ui-search-input select",c)[0].selectedIndex=0:a("td.ui-search-input input",c).val(d);!0===g.autosearch&&E()});c.ftoolbar=!0;c.triggerToolbar=E;c.clearToolbar=function(e){var p={},k=0,u;e="boolean"!==typeof e?!0:e;a.each(m,function(){var b,e=a("#"+q(C(this.name)),!0===this.frozen&&!0===f.frozenColumns?d.fhDiv:d.hDiv),h,g=this.searchoptions||{};void 0!==g.defaultValue&&(b=g.defaultValue);
u=this.index||this.name;switch(this.stype){case "select":h=0<e.length?!e[0].multiple:!0;e.find("option").each(function(c){this.selected=0===c&&h;if(a(this).val()===b)return this.selected=!0,!1});if(void 0!==b)p[u]=b,k++;else try{delete f.postData[u]}catch(l){}break;case "text":e.val(b||"");if(void 0!==b)p[u]=b,k++;else try{delete f.postData[u]}catch(l){}break;case "custom":a.isFunction(g.custom_value)&&0<e.length&&"SPAN"===e[0].nodeName.toUpperCase()&&g.custom_value.call(c,e.children(".customelement").first(),
"set",b||"")}});var l=0<k?!0:!1;f.resetsearch=!0;if(g.stringResult||g.searchOperators||"local"===f.datatype){var h='{"groupOp":"'+g.groupOp+'","rules":[',x=0;a.each(p,function(a,b){0<x&&(h+=",");h+='{"field":"'+a+'",';h+='"op":"eq",';h+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';x++});h+="]}";a.extend(f.postData,{filters:h});a.each(["searchField","searchString","searchOper"],function(a,b){f.postData.hasOwnProperty(b)&&delete f.postData[b]})}else a.extend(f.postData,p);var n;
f.searchurl&&(n=f.url,b.jqGrid("setGridParam",{url:f.searchurl}));var r="stop"===b.triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!r&&a.isFunction(g.beforeClear)&&(r=g.beforeClear.call(c));r||e&&b.jqGrid("setGridParam",{search:l}).trigger("reloadGrid",[a.extend({page:1},g.reloadGridResetOptions||{})]);n&&b.jqGrid("setGridParam",{url:n});b.triggerHandler("jqGridToolbarAfterClear");a.isFunction(g.afterClear)&&g.afterClear()};c.toggleToolbar=function(){var c=a("tr.ui-search-toolbar",d.hDiv),e=!0===
f.frozenColumns?a("tr.ui-search-toolbar",d.fhDiv):!1;"none"===c.css("display")?(c.show(),e&&e.show()):(c.hide(),e&&e.hide());!0===f.frozenColumns&&(b.jqGrid("destroyFrozenColumns"),b.jqGrid("setFrozenColumns"))};!0===f.frozenColumns&&(b.jqGrid("destroyFrozenColumns"),b.jqGrid("setFrozenColumns"));b.bind("jqGridRefreshFilterValues.filterToolbar"+(g.loadFilterDefaults?" jqGridAfterLoadComplete.filterToolbar":""),function(){var b,c,d=t(!0)||{},e;if(g.stringResult||g.searchOperators||"local"===f.datatype||
!f.search){for(b in d)d.hasOwnProperty(b)&&(c=d[b],e=a("#"+q(C(b))),a.trim(e.val())!==c.data&&e.val(c.data),e=e.closest(".ui-search-input").siblings(".ui-search-oper").children(".soptclass"),e.data("soper",c.op),e.text(g.operands[c.op]));for(c=0;c<f.colModel.length;c++)b=f.colModel[c].name,d.hasOwnProperty(b)||a("#"+q(C(b))).val("")}})}})},destroyFilterToolbar:function(){return this.each(function(){this.ftoolbar&&(this.toggleToolbar=this.clearToolbar=this.triggerToolbar=null,this.ftoolbar=!1,a(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove(),
!0===this.p.frozenColumns&&a(this).jqGrid("destroyFrozenColumns").jqGrid("setFrozenColumns"))})},destroyGroupHeader:function(e){void 0===e&&(e=!0);return this.each(function(){var c,d,b,f;c=this.grid;var k=this.p.colModel,l=a("table.ui-jqgrid-htable thead",c.hDiv);if(c){a(this).unbind(".setGroupHeaders");var n=a("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),g=c.headers;c=0;for(d=g.length;c<d;c++){b=k[c].hidden?"none":"";b=a(g[c].el).width(g[c].width).css("display",b);try{b.removeAttr("rowSpan")}catch(m){b.attr("rowSpan",
1)}n.append(b);f=b.children("span.ui-jqgrid-resize");0<f.length&&(f[0].style.height="");b.children("div")[0].style.top=""}a(l).children("tr.ui-jqgrid-labels").remove();a(l).prepend(n);!0===e&&a(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(e){e=a.extend({useColSpanStyle:!1,applyLabelClasses:!0,groupHeaders:[]},e||{});return this.each(function(){this.p.groupHeader=e;var c,d,b=0,f,k,l,n,g,m,A,B=this.p,q=B.colModel,J=q.length,G=this.grid.headers,w=a("table.ui-jqgrid-htable",
this.grid.hDiv),L=z.isCellClassHidden,H=w.children("thead").children("tr.ui-jqgrid-labels"),C=H.last().addClass("jqg-second-row-header");f=w.children("thead");var t=w.find(".jqg-first-row-header");void 0===t[0]?t=a("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):t.empty();var E=function(a,b){var c=b.length,d;for(d=0;d<c;d++)if(b[d].startColumnName===a)return d;return-1};a(this).prepend(f);f=a("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header");
for(c=0;c<J;c++)if(l=G[c].el,n=a(l),d=q[c],k={height:"0",width:G[c].width+"px",display:d.hidden?"none":""},a("<th>",{role:"gridcell"}).css(k).addClass("ui-first-th-"+B.direction+(e.applyLabelClasses?" "+(d.labelClasses||""):"")).appendTo(t),l.style.width="",k=F.call(this,"colHeaders","ui-th-column-header ui-th-"+B.direction+" "+(e.applyLabelClasses?d.labelClasses||"":"")),g=E(d.name,e.groupHeaders),0<=g){g=e.groupHeaders[g];b=g.numberOfColumns;m=g.titleText;for(A=g=d=0;g<b&&c+g<J;g++)A++,q[c+g].hidden||
L(q[c+g].classes)||d++;k=a("<th>").addClass(k).css({height:"22px","border-top":"0 none"}).html(m);1<A&&k.attr("colspan",String(A));B.headertitles&&k.attr("title",k.text());0===d&&k.hide();n.before(k);f.append(l);--b}else 0===b?e.useColSpanStyle?n.attr("rowspan",H.length+1):(a("<th>").addClass(k).css({display:d.hidden?"none":"","border-top":"0 none"}).insertBefore(n),f.append(l)):(f.append(l),b--);B=a(this).children("thead");B.prepend(t);f.insertAfter(C);w.prepend(B);e.useColSpanStyle&&(w.find("span.ui-jqgrid-resize").each(function(){var b=
a(this).parent();b.is(":visible")&&(this.style.cssText="height:"+b.height()+"px !important;cursor:col-resize;")}),w.find(".ui-th-column>div").each(function(){var b=a(this),c=b.parent();c.is(":visible")&&c.is(":has(span.ui-jqgrid-resize)")&&!b.hasClass("ui-jqgrid-rotate")&&!b.hasClass("ui-jqgrid-rotateOldIE")&&b.css("top",(c.height()-b.outerHeight(!0))/2+"px")}));a(this).triggerHandler("jqGridAfterSetGroupHeaders")})},getNumberOfFrozenColumns:function(){var a=this;if(0===a.length)return 0;var a=a[0],
a=a.p.colModel,c=a.length,d=-1,b;for(b=0;b<c&&!0===a[b].frozen;b++)d=b;return d+1},setFrozenColumns:function(){return this.each(function(){var e=this,c=a(e),d=e.p,b=e.grid;if(b&&null!=d&&!0!==d.frozenColumns){var f=d.colModel,k,l=f.length,n=-1,g=!1,m=[],A=q(d.id),B=F.call(e,"states.hover"),z=F.call(e,"states.disabled");if(!0!==d.subGrid&&!0!==d.treeGrid&&!d.scroll){for(k=0;k<l&&!0===f[k].frozen;k++)g=!0,n=k,m.push("#jqgh_"+A+"_"+q(f[k].name));d.sortable&&(f=a(b.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels"),
f.sortable("destroy"),c.jqGrid("setGridParam",{sortable:{options:{items:0<m.length?">th:not(:has("+m.join(",")+"),:hidden)":">th:not(:hidden)"}}}),c.jqGrid("sortableColumns",f));if(0<=n&&g){g=d.caption?a(b.cDiv).outerHeight():0;m=a(".ui-jqgrid-htable",d.gView).height();d.toppager&&(g+=a(b.topDiv).outerHeight());!0===d.toolbar[0]&&"bottom"!==d.toolbar[1]&&(g+=a(b.uDiv).outerHeight());b.fhDiv=a("<div style='position:absolute;overflow:hidden;"+("rtl"===d.direction?"right:0;border-top-left-radius:0;":
"left:0;border-top-right-radius:0;")+"top:"+g+"px;height:"+m+"px;' class='"+F.call(e,"hDiv","frozen-div ui-jqgrid-hdiv")+"'></div>");b.fbDiv=a("<div style='position:absolute;overflow:hidden;"+("rtl"===d.direction?"right:0;":"left:0;")+"top:"+(parseInt(g,10)+parseInt(m,10)+1)+"px;overflow:hidden;' class='frozen-bdiv ui-jqgrid-bdiv'></div>");a(d.gView).append(b.fhDiv);f=a(".ui-jqgrid-htable",d.gView).clone(!0);l=f[0].tHead.rows;if(d.groupHeader){a(l[0].cells).filter(":gt("+n+")").remove();a(l).filter(".jqg-third-row-header").each(function(){a(this).children("th[id]").each(function(){var b=
a(this).attr("id");b&&b.substr(0,e.id.length+1)===e.id+"_"&&(b=b.substr(e.id.length+1),d.iColByName[b]>n&&a(this).remove())})});var J=-1,G=-1,w,L;a(l).filter(".jqg-second-row-header").children("th").each(function(){w=parseInt(a(this).attr("colspan")||1,10);L=parseInt(a(this).attr("rowspan")||1,10);1<L?(J++,G++):w&&(J+=w,G++);if(J===n)return!1});J!==n&&(G=n);a(l).filter(".jqg-second-row-header,.ui-search-toolbar").each(function(){a(this).children(":gt("+G+")").remove()})}else a(l).each(function(){a(this).children(":gt("+
n+")").remove()});a(f).width(1);a(b.fhDiv).append(f).mousemove(function(a){if(b.resizing)return b.dragMove(a),!1}).scroll(function(){this.scrollLeft=0});d.footerrow&&(f=a(".ui-jqgrid-bdiv",d.gView).height(),b.fsDiv=a("<div style='position:absolute;"+("rtl"===d.direction?"right:0;":"left:0;")+"top:"+(parseInt(g,10)+parseInt(m,10)+parseInt(f,10)+1)+"px;' class='frozen-sdiv ui-jqgrid-sdiv'></div>"),a(d.gView).append(b.fsDiv),g=a(".ui-jqgrid-ftable",d.gView).clone(!0),a("tr",g).each(function(){a("td:gt("+
n+")",this).remove()}),a(g).width(1),a(b.fsDiv).append(g));c.bind("jqGridSortCol.setFrozenColumns",function(c,e,f){c=a("tr.ui-jqgrid-labels:last th:eq("+d.lastsort+")",b.fhDiv);e=a("tr.ui-jqgrid-labels:last th:eq("+f+")",b.fhDiv);a("span.ui-grid-ico-sort",c).addClass(z);a(c).attr("aria-selected","false");a("span.ui-icon-"+d.sortorder,e).removeClass(z);a(e).attr("aria-selected","true");d.viewsortcols[0]||d.lastsort===f||(a("span.s-ico",c).hide(),a("span.s-ico",e).show())});a(d.gView).append(b.fbDiv);
a(b.bDiv).scroll(function(){a(b.fbDiv).scrollTop(a(this).scrollTop())});!0===d.hoverrows&&a(d.idSel).unbind("mouseover").unbind("mouseout");var H=function(a,b){var c=a.height();1<=Math.abs(c-b)&&0<b&&(a.height(b),c=a.height(),1<=Math.abs(b-c)&&a.height(b+Math.round(b-c)))},C=function(a,b){var c=a.width();1<=Math.abs(c-b)&&(a.width(b),c=a.width(),1<=Math.abs(b-c)&&a.width(b+Math.round(b-c)))},t=function(b,c,e,f){var g,l,n,m,t,h,q;q=a(c).position().top;var w,r,v;if(null!=b&&0<b.length){b[0].scrollTop=
c.scrollTop;b.css("rtl"===d.direction?{top:q,right:0}:{top:q,left:0});l=b.children("table").children("thead").children("tr");n=a(c).children("div").children("table").children("thead").children("tr");0===n.length&&(l=a(b.children("table")[0].rows),n=a(a(c).children("div").children("table")[0].rows));g=Math.min(l.length,n.length);w=0<g?a(l[0]).position().top:0;r=0<g?a(n[0]).position().top:0;if(0<=e)for(0<=f&&(g=Math.min(f+1,g));e<g;e++)if(m=a(n[e]),"none"!==m.css("display")&&m.is(":visible")){q=m.position().top;
f=a(l[e]);t=f.position().top;h=m.height();if(null!=d.groupHeader&&d.groupHeader.useColSpanStyle)for(v=m[0].cells,k=0;k<v.length;k++)m=v[k],null!=m&&"TH"===m.nodeName.toUpperCase()&&(h=Math.max(h,a(m).height()));q=h+(q-r)+(w-t);H(f,q)}H(b,c.clientHeight)}},g={resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},E={header:g,resizeFooter:!0,body:g};c.bind("jqGridAfterGridComplete.setFrozenColumns",function(){a(d.idSel+"_frozen").remove();a(b.fbDiv).height(b.hDiv.clientHeight);var e=a(this).clone(!0),f=
e[0].rows,g=c[0].rows;a(f).filter("tr[role=row]").each(function(){a(this.cells).filter("td[role=gridcell]:gt("+n+")").remove()});b.fbRows=f;e.width(1).attr("id",d.id+"_frozen");e.appendTo(b.fbDiv);if(!0===d.hoverrows){var k=function(b,c,d){a(b)[c](B);a(d[b.rowIndex])[c](B)};a(f).filter(".jqgrow").hover(function(){k(this,"addClass",g)},function(){k(this,"removeClass",g)});a(g).filter(".jqgrow").hover(function(){k(this,"addClass",f)},function(){k(this,"removeClass",f)})}t(b.fhDiv,b.hDiv,0,-1);t(b.fbDiv,
b.bDiv,0,-1);b.sDiv&&t(b.fsDiv,b.sDiv,0,-1)});var M=function(c){a(b.fbDiv).scrollTop(a(b.bDiv).scrollTop());c.header.resizeDiv&&t(b.fhDiv,b.hDiv,c.header.iRowStart,c.header.iRowEnd);c.body.resizeDiv&&t(b.fbDiv,b.bDiv,c.body.iRowStart,c.body.iRowEnd);c.resizeFooter&&b.sDiv&&c.resizeFooter&&t(b.fsDiv,b.sDiv,0,-1);var d=b.fhDiv[0].clientWidth;c.header.resizeDiv&&null!=b.fhDiv&&1<=b.fhDiv.length&&H(a(b.fhDiv),b.hDiv.clientHeight);c.body.resizeDiv&&null!=b.fbDiv&&0<b.fbDiv.length&&C(a(b.fbDiv),d);c.resizeFooter&&
null!=b.fsDiv&&0<=b.fsDiv.length&&C(a(b.fsDiv),d)};a(d.gBox).bind("resizestop.setFrozenColumns",function(){setTimeout(function(){M(E)},50)});c.bind("jqGridInlineEditRow.setFrozenColumns jqGridInlineAfterRestoreRow.setFrozenColumns jqGridInlineAfterSaveRow.setFrozenColumns jqGridAfterEditCell.setFrozenColumns jqGridAfterRestoreCell.setFrozenColumns jqGridAfterSaveCell.setFrozenColumns jqGridResizeStop.setFrozenColumns",function(a,b){var d=c.jqGrid("getInd",b);M({header:{resizeDiv:!1,resizedRows:{iRowStart:-1,
iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:d,iRowEnd:d}}})});c.bind("jqGridResizeStop.setFrozenColumns",function(){M(E)});c.bind("jqGridResetFrozenHeights.setFrozenColumns",function(a,b){M(b||E)});b.hDiv.loading||c.triggerHandler("jqGridAfterGridComplete");d.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){var e=a(this),c=this.grid,d=this.p,b=q(d.id);if(c&&!0===d.frozenColumns){a(c.fhDiv).remove();a(c.fbDiv).remove();c.fhDiv=null;c.fbDiv=
null;c.fbRows=null;d.footerrow&&(a(c.fsDiv).remove(),c.fsDiv=null);e.unbind(".setFrozenColumns");if(!0===d.hoverrows){var f,k=F.call(this,"states.hover");e.bind("mouseover",function(b){f=a(b.target).closest("tr.jqgrow");"ui-subgrid"!==a(f).attr("class")&&a(f).addClass(k)}).bind("mouseout",function(b){f=a(b.target).closest("tr.jqgrow");a(f).removeClass(k)})}d.frozenColumns=!1;d.sortable&&(c=a(c.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels"),c.sortable("destroy"),e.jqGrid("setGridParam",{sortable:{options:{items:">th:not(:has(#jqgh_"+
b+"_cb,#jqgh_"+b+"_rn,#jqgh_"+b+"_subgrid),:hidden)"}}}),e.jqGrid("sortableColumns",c))}})}})});
//# sourceMappingURL=grid.custom.map
